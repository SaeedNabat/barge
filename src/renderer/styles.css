html, body {
	height: 100%;
	margin: 0;
	background: #0b0d12;
	color: #e5e7eb;
	font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial;
}

.gradient-bg {
	position: relative;
	isolation: isolate;
	background: radial-gradient(1200px 600px at -10% -10%, rgba(113, 73, 255, 0.25), transparent 60%),
		radial-gradient(1000px 600px at 110% -20%, rgba(0, 199, 255, 0.2), transparent 60%),
		radial-gradient(900px 500px at 50% 120%, rgba(255, 0, 128, 0.18), transparent 60%),
		linear-gradient(180deg, #0b0d12 0%, #0f1115 100%);
}

.window { height: 100vh; }

.titlebar {
	display: flex;
	align-items: center;
	justify-content: space-between;
	height: 36px;
	padding: 0 10px;
	backdrop-filter: blur(8px);
	background: rgba(15, 17, 21, 0.5);
	border-bottom: 1px solid rgba(255, 255, 255, 0.06);
	-webkit-app-region: drag;
}
.titlebar .title { font-weight: 600; letter-spacing: 0.4px; color: #cbd5e1; }
.window-controls button {
	background: transparent;
	color: #aab4c2;
	border: none;
	width: 36px;
	height: 28px;
	border-radius: 6px;
	cursor: pointer;
}
.window-controls button:hover { background: rgba(255, 255, 255, 0.06); color: #e2e8f0; }
.window-controls #winClose:hover { background: #ef44441a; color: #fecaca; }

.app {
	display: grid;
	grid-template-columns: 280px 1fr;
	height: calc(100vh - 36px);
}

.sidebar {
	background: rgba(17, 19, 24, 0.7);
	backdrop-filter: blur(8px);
	border-right: 1px solid rgba(255, 255, 255, 0.06);
	display: flex;
	flex-direction: column;
}

.file-tree {
	flex: 1;
	overflow: auto;
	padding: 8px 6px;
	font-size: 13px;
}
.file-tree .item { padding: 4px 6px; border-radius: 8px; cursor: pointer; display: flex; gap: 8px; align-items: center; }
.file-tree .item:hover { background: rgba(255,255,255,0.05); }
.file-tree .children { margin-left: 14px; }

.main { display: grid; grid-template-rows: 40px 1fr 24px; }

.topbar {
	display: flex;
	align-items: center;
	justify-content: space-between;
	height: 40px;
	padding: 0 8px;
	border-bottom: 1px solid rgba(255,255,255,0.06);
	background: rgba(15, 17, 21, 0.55);
	backdrop-filter: blur(8px);
}

.tabs { display: flex; gap: 6px; align-items: stretch; overflow: auto; }
.tab {
	background: linear-gradient(180deg, rgba(20, 24, 36, 0.9), rgba(16, 21, 33, 0.9));
	border: 1px solid rgba(75, 85, 99, 0.3);
	border-bottom: none;
	padding: 0 8px;
	border-top-left-radius: 10px;
	border-top-right-radius: 10px;
	font-size: 13px;
	color: #cbd5e1;
	display: flex;
	align-items: center;
	gap: 8px;
	height: 28px;
	box-shadow: 0 2px 12px rgba(115, 112, 255, 0.08) inset;
	transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease;
}
.tab:hover { transform: translateY(-1px); box-shadow: 0 4px 14px rgba(115, 112, 255, 0.16) inset; }
.tab .title { padding: 0 2px; }
.tab .close { width: 18px; height: 18px; border-radius: 4px; display: flex; align-items: center; justify-content: center; color: #94a3b8; cursor: pointer; }
.tab .close:hover { background: rgba(255,255,255,0.08); color: #e2e8f0; }
.tab.active { background: linear-gradient(180deg, rgba(38, 44, 66, 0.95), rgba(23, 29, 48, 0.95)); color: #fff; border-color: rgba(138, 180, 255, 0.45); box-shadow: 0 6px 24px rgba(0, 199, 255, 0.18) inset; }

.actions button {
	background: rgba(34, 40, 58, 0.7);
	color: #e5e7eb;
	border: 1px solid rgba(42, 49, 68, 0.8);
	padding: 6px 10px;
	border-radius: 8px;
	cursor: pointer;
	transition: background .15s ease, transform .1s ease;
}
.actions button:hover { background: rgba(42, 48, 71, 0.9); transform: translateY(-1px); }

#editor { position: relative; height: calc(100vh - 36px - 40px - 24px); }

.statusbar { display: flex; align-items: center; justify-content: space-between; height: 24px; padding: 0 10px; border-top: 1px solid rgba(255,255,255,0.06); background: rgba(15, 17, 21, 0.55); backdrop-filter: blur(8px); font-size: 12px; color: #9aa4b2; } 

.menubar { display: flex; gap: 12px; height: 32px; align-items: center; padding: 0 8px; border-bottom: 1px solid rgba(255,255,255,0.06); background: rgba(15, 17, 21, 0.55); backdrop-filter: blur(8px); position: relative; z-index: 5000; }
.menu { position: relative; z-index: 5001; }
.menu-label { color: #e6edf6; padding: 6px 10px; border-radius: 8px; cursor: default; transition: background .15s ease, color .15s ease; }
.menu:hover .menu-label { background: rgba(136, 189, 255, 0.14); color: #ffffff; }
.dropdown { position: absolute; top: calc(100% + 6px); left: 0; min-width: 260px; background: rgba(17, 21, 30, 0.98); border: 1px solid rgba(153, 174, 206, 0.35); border-radius: 12px; padding: 8px; box-shadow: 0 24px 80px rgba(3, 8, 20, 0.6), 0 10px 28px rgba(80, 180, 255, 0.18); opacity: 0; transform: translateY(0); pointer-events: none; transition: opacity .16s ease; z-index: 9999; backdrop-filter: blur(10px) saturate(110%); }
.menu:hover .dropdown, .menu:focus-within .dropdown, .menu.open .dropdown { opacity: 1; transform: translateY(0); pointer-events: auto; }
.menu-item { display: flex; align-items: center; justify-content: space-between; width: 100%; background: transparent; border: none; color: #f3f6fb; padding: 10px 12px; border-radius: 10px; cursor: pointer; text-align: left; font-size: 13.5px; letter-spacing: 0.1px; }
.menu-item:hover { background: rgba(136, 189, 255, 0.16); }
.menu-sep { height: 1px; margin: 8px; background: linear-gradient(90deg, transparent, rgba(200,210,230,0.35), transparent); border-radius: 1px; }
kbd { background: rgba(136, 189, 255, 0.18); border: 1px solid rgba(136, 189, 255, 0.3); padding: 2px 8px; border-radius: 8px; color: #e6edf6; font-size: 11px; } 

.titlebar { -webkit-app-region: drag; }
.window-controls, .menubar, .app, .sidebar, .main, .topbar, .statusbar, .actions, .file-tree, .tabs, .dropdown, .menu-item, button { -webkit-app-region: no-drag; } 

.modal.hidden { display: none; }
.modal { position: fixed; inset: 0; z-index: 10000; }
.modal-backdrop { position: absolute; inset: 0; background: rgba(6,10,16,0.6); backdrop-filter: blur(6px); }
.modal-card { position: relative; width: 520px; max-width: calc(100vw - 40px); margin: 10vh auto; background: linear-gradient(180deg, rgba(22,26,36,0.96), rgba(16,20,30,0.96)); border: 1px solid rgba(153,174,206,0.3); border-radius: 14px; box-shadow: 0 30px 80px rgba(3,8,20,0.55); overflow: hidden; }
.modal-header { padding: 14px 16px; border-bottom: 1px solid rgba(255,255,255,0.06); }
.modal-header h3 { margin: 0; font-size: 16px; color: #e6edf6; }
.modal-body { padding: 16px; display: grid; gap: 14px; }
.field { display: grid; gap: 6px; }
.field span { font-size: 12px; color: #aab4c2; }
.field input { background: rgba(26,31,45,0.7); color: #eef2f7; border: 1px solid rgba(82, 97, 126, 0.6); padding: 8px 10px; border-radius: 8px; outline: none; }
.field input:focus { border-color: rgba(138, 180, 255, 0.6); box-shadow: 0 0 0 3px rgba(138, 180, 255, 0.18); }
.modal-footer { padding: 12px 16px; border-top: 1px solid rgba(255,255,255,0.06); display: flex; justify-content: flex-end; gap: 8px; }
.modal-footer button { background: rgba(34, 40, 58, 0.7); color: #e5e7eb; border: 1px solid rgba(42, 49, 68, 0.8); padding: 8px 12px; border-radius: 8px; cursor: pointer; }
.modal-footer button:hover { background: rgba(42, 48, 71, 0.9); } 

/* Command Palette */
.cmd-card { width: 640px; max-width: calc(100vw - 40px); margin: 12vh auto; padding: 10px; border-radius: 14px; }
.cmd-input-wrap input { background: rgba(26,31,45,0.85); color: #eef2f7; border: 1px solid rgba(82, 97, 126, 0.6); padding: 10px 12px; border-radius: 10px; outline: none; font-size: 14px; }
.cmd-input-wrap .input-icon { left: 12px; }
.cmd-input-wrap input { padding-left: 36px; }
.cmd-list { max-height: 50vh; overflow: auto; margin-top: 8px; display: grid; gap: 6px; }
.cmd-item { display: grid; grid-template-columns: 1fr auto; align-items: center; padding: 10px 12px; border-radius: 10px; background: rgba(20,24,36,0.65); border: 1px solid rgba(82,97,126,0.5); color: #e6edf6; cursor: pointer; }
.cmd-item:hover { background: rgba(42,48,71,0.75); }
.cmd-item.selected { background: linear-gradient(180deg, rgba(38,44,66,0.95), rgba(23,29,48,0.95)); border-color: rgba(138,180,255,0.45); box-shadow: inset 0 6px 24px rgba(0, 199, 255, 0.18); }
.cmd-item .hint { color: #9aa4b2; font-size: 12px; }
.cmd-empty { margin-top: 10px; padding: 10px 12px; color: #9aa4b2; font-size: 13px; }

/* Light theme variants for command palette */
body.theme-light .cmd-input-wrap input { background: rgba(255,255,255,0.85); color: #0f172a; border-color: rgba(0,0,0,0.12); }
body.theme-light .cmd-item { background: rgba(255,255,255,0.9); border-color: rgba(0,0,0,0.12); color: #0f172a; }
body.theme-light .cmd-item:hover { background: rgba(2,132,199,0.10); }
body.theme-light .cmd-item.selected { background: linear-gradient(180deg, rgba(255,255,255,1), rgba(240,243,248,1)); border-color: rgba(2,132,199,0.35); box-shadow: inset 0 6px 18px rgba(2,132,199,0.12); }
body.theme-light .cmd-empty { color: #475569; }

/* Light theme overrides */
body.theme-light { background: #f5f7fb; color: #111827; }
body.theme-light .gradient-bg { background: radial-gradient(1200px 600px at -10% -10%, rgba(113, 73, 255, 0.10), transparent 60%),
	radial-gradient(1000px 600px at 110% -20%, rgba(0, 150, 255, 0.10), transparent 60%),
	linear-gradient(180deg, #f5f7fb 0%, #eef2f7 100%); }
body.theme-light .titlebar { background: rgba(255,255,255,0.8); border-bottom-color: rgba(0,0,0,0.06); }
body.theme-light .window-controls button { color: #334155; }
body.theme-light .window-controls button:hover { background: rgba(0,0,0,0.06); color: #0f172a; }
body.theme-light .menubar { background: rgba(255,255,255,0.75); border-bottom-color: rgba(0,0,0,0.06); }
body.theme-light .menu-label { color: #1f2937; }
body.theme-light .menu:hover .menu-label { background: rgba(0,0,0,0.06); color: #0f172a; }
body.theme-light .dropdown { background: rgba(255, 255, 255, 0.98); border-color: rgba(0,0,0,0.12); box-shadow: 0 24px 80px rgba(0,0,0,0.18), 0 10px 28px rgba(0,0,0,0.08); }
body.theme-light .menu-item { color: #0f172a; }
body.theme-light .menu-item:hover { background: rgba(2, 132, 199, 0.12); }
body.theme-light kbd { background: rgba(2,132,199,0.12); border-color: rgba(2,132,199,0.25); color: #0f172a; }
body.theme-light .sidebar { background: rgba(255,255,255,0.75); border-right-color: rgba(0,0,0,0.06); }
body.theme-light .file-tree .item:hover { background: rgba(2,132,199,0.10); }
body.theme-light .topbar { background: rgba(255,255,255,0.75); border-bottom-color: rgba(0,0,0,0.06); }
body.theme-light .tab { background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(245, 247, 251, 0.95)); border-color: rgba(0,0,0,0.12); color: #1f2937; box-shadow: inset 0 2px 10px rgba(0,0,0,0.04); }
body.theme-light .tab:hover { box-shadow: inset 0 4px 12px rgba(0,0,0,0.08); }
body.theme-light .tab.active { background: linear-gradient(180deg, rgba(255,255,255,1), rgba(240,243,248,1)); border-color: rgba(2,132,199,0.35); box-shadow: inset 0 6px 18px rgba(2,132,199,0.12); color: #0f172a; }
body.theme-light .statusbar { background: rgba(255,255,255,0.75); border-top-color: rgba(0,0,0,0.06); color: #475569; }
body.theme-light .actions button { background: rgba(255,255,255,0.8); color: #0f172a; border-color: rgba(0,0,0,0.12); }
body.theme-light .modal-backdrop { background: rgba(0,0,0,0.35); }
body.theme-light .modal-card { background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(247,249,253,0.98)); border-color: rgba(0,0,0,0.12); }
body.theme-light .modal-header { border-bottom-color: rgba(0,0,0,0.06); }
body.theme-light .modal-header h3 { color: #0f172a; }
body.theme-light .field span { color: #475569; }
body.theme-light .field input { background: rgba(255,255,255,0.8); color: #0f172a; border-color: rgba(0,0,0,0.12); }
body.theme-light .field input:focus { border-color: rgba(2,132,199,0.5); box-shadow: 0 0 0 3px rgba(2,132,199,0.18); }
body.theme-light .modal-footer { border-top-color: rgba(0,0,0,0.06); }
body.theme-light .modal-footer button { background: rgba(255,255,255,0.8); color: #0f172a; border-color: rgba(0,0,0,0.12); }
body.theme-light .modal-footer button:hover { background: rgba(2,132,199,0.10); } 

.search-panel { border-top: 1px solid rgba(255,255,255,0.06); padding: 8px; display: grid; gap: 8px; }
.search-panel.hidden { display: none; }
.search-header { font-size: 12px; color: #9aa4b2; }
.search-controls { display: grid; grid-template-columns: 1fr auto auto auto; gap: 6px; align-items: center; }
.search-controls input[type="text"], .search-controls input[type="number"], .search-controls select { background: rgba(26,31,45,0.7); color: #eef2f7; border: 1px solid rgba(82,97,126,0.6); padding: 6px 8px; border-radius: 6px; }
body.theme-light .search-controls input[type="text"], body.theme-light .search-controls input[type="number"], body.theme-light .search-controls select { background: rgba(255,255,255,0.8); color: #0f172a; border-color: rgba(0,0,0,0.12); }
.search-results { max-height: 30vh; overflow: auto; display: grid; gap: 4px; }
.result-item { padding: 6px 8px; border-radius: 6px; cursor: pointer; font-size: 12px; color: #cbd5e1; }
.result-item:hover { background: rgba(255,255,255,0.05); }
.result-file { color: #8aa2c4; font-size: 11px; }
.result-line { white-space: pre; }
.result-highlight { background: rgba(255, 221, 87, 0.25); border-bottom: 1px solid rgba(255, 221, 87, 0.6); }
body.theme-light .result-item { color: #0f172a; }
body.theme-light .result-item:hover { background: rgba(2,132,199,0.10); }
body.theme-light .result-file { color: #2563eb; }
body.theme-light .result-highlight { background: rgba(250, 204, 21, 0.25); border-bottom-color: rgba(250, 204, 21, 0.6); } 