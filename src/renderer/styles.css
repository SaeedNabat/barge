html, body {
	height: 100%;
	margin: 0;
	background: #0b0d12;
	color: #e5e7eb;
	font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial;
	overflow: hidden; /* prevent global scroll */
}

.gradient-bg {
	position: relative;
	isolation: isolate;
	background: radial-gradient(1200px 600px at -10% -10%, rgba(113, 73, 255, 0.25), transparent 60%),
		radial-gradient(1000px 600px at 110% -20%, rgba(0, 199, 255, 0.2), transparent 60%),
		radial-gradient(900px 500px at 50% 120%, rgba(255, 0, 128, 0.18), transparent 60%),
		linear-gradient(180deg, #0b0d12 0%, #0f1115 100%);
}

.window { height: 100vh; }

.titlebar {
	display: flex;
	align-items: center;
	justify-content: space-between;
	height: 36px;
	padding: 0 10px;
	backdrop-filter: blur(8px);
	background: rgba(15, 17, 21, 0.5);
	border-bottom: 1px solid rgba(255, 255, 255, 0.06);
	-webkit-app-region: drag;
}
.titlebar .title { font-weight: 600; letter-spacing: 0.4px; color: #cbd5e1; }
.window-controls button {
	background: transparent;
	color: #aab4c2;
	border: none;
	width: 36px;
	height: 28px;
	border-radius: 6px;
	cursor: pointer;
	display: inline-flex;
	align-items: center;
	justify-content: center;
}
.window-controls button svg { transition: transform .08s ease, filter .15s ease, opacity .15s ease; opacity: .9; }
.window-controls button:hover { background: rgba(255, 255, 255, 0.06); }
.window-controls button:hover svg { transform: translateY(-1px); filter: drop-shadow(0 2px 8px rgba(99,102,241,0.25)); opacity: 1; }
.window-controls #winClose:hover { background: #ef44441a; }

.app {
	display: grid;
	grid-template-columns: 280px 1fr;
	height: calc(100vh - 36px - 32px); /* subtract titlebar + menubar */
	min-height: 0; /* allow children to size */
}

.sidebar {
	background: rgba(17, 19, 24, 0.7);
	backdrop-filter: blur(8px);
	border-right: 1px solid rgba(255, 255, 255, 0.06);
	display: flex;
	flex-direction: column;
	min-height: 0;
}

.file-tree {
	flex: 1;
	overflow: auto;
	padding: 8px 6px;
	font-size: 13px;
	min-height: 0;
	/* Firefox */
	scrollbar-width: thin;
	scrollbar-color: rgba(148, 163, 184, 0.35) transparent;
}
/* WebKit */
.file-tree::-webkit-scrollbar { width: 10px; }
.file-tree::-webkit-scrollbar-track { background: transparent; }
.file-tree::-webkit-scrollbar-thumb {
	background: linear-gradient(180deg, rgba(148,163,184,0.35), rgba(100,116,139,0.35));
	border-radius: 8px;
	border: 2px solid transparent;
	background-clip: content-box;
}
.file-tree:hover::-webkit-scrollbar-thumb {
	background: linear-gradient(180deg, rgba(148,163,184,0.55), rgba(100,116,139,0.55));
}
/* Light theme variants */
body.theme-light .file-tree { scrollbar-color: rgba(71,85,105,0.45) transparent; }
body.theme-light .file-tree::-webkit-scrollbar-thumb {
	background: linear-gradient(180deg, rgba(100,116,139,0.45), rgba(71,85,105,0.45));
}
body.theme-light .file-tree:hover::-webkit-scrollbar-thumb {
	background: linear-gradient(180deg, rgba(100,116,139,0.65), rgba(71,85,105,0.65));
}
.file-tree .item { padding: 4px 6px; border-radius: 8px; cursor: pointer; display: flex; gap: 8px; align-items: center; }
.file-tree .item:hover { background: rgba(255,255,255,0.05); }
.file-tree .item.selected { background: rgba(96,165,250,0.18); outline: 1px solid rgba(147,197,253,0.45); }
.file-tree .children { margin-left: 14px; }

.main { display: grid; grid-template-rows: 40px 1fr auto 24px; min-height: 0; }

.topbar {
	display: flex;
	align-items: center;
	justify-content: space-between;
	height: 40px;
	padding: 0 8px;
	border-bottom: 1px solid rgba(255,255,255,0.06);
	background: rgba(15, 17, 21, 0.55);
	backdrop-filter: blur(8px);
}

.tabs { display: flex; gap: 6px; align-items: stretch; overflow: auto; }
.tab {
	background: linear-gradient(180deg, rgba(20, 24, 36, 0.9), rgba(16, 21, 33, 0.9));
	border: 1px solid rgba(75, 85, 99, 0.3);
	border-bottom: none;
	padding: 0 8px;
	border-top-left-radius: 10px;
	border-top-right-radius: 10px;
	font-size: 13px;
	color: #cbd5e1;
	display: flex;
	align-items: center;
	gap: 8px;
	height: 28px;
	box-shadow: 0 2px 12px rgba(115, 112, 255, 0.08) inset;
	transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease;
	cursor: pointer;
}
.tab:hover { transform: translateY(-1px); box-shadow: 0 4px 14px rgba(115, 112, 255, 0.16) inset; }
.tab .title { padding: 0 2px; }
.tab .close { width: 18px; height: 18px; border-radius: 4px; display: flex; align-items: center; justify-content: center; color: #94a3b8; cursor: pointer; }
.tab .close:hover { background: rgba(255,255,255,0.08); color: #e2e8f0; }
.tab.active { background: linear-gradient(180deg, rgba(38, 44, 66, 0.95), rgba(23, 29, 48, 0.95)); color: #fff; border-color: rgba(138, 180, 255, 0.45); box-shadow: 0 6px 24px rgba(0, 199, 255, 0.18) inset; }

.actions button {
	background: rgba(34, 40, 58, 0.7);
	color: #e5e7eb;
	border: 1px solid rgba(42, 49, 68, 0.8);
	padding: 6px 10px;
	border-radius: 8px;
	cursor: pointer;
	transition: background .15s ease, transform .1s ease;
}
.actions button:hover { background: rgba(42, 48, 71, 0.9); transform: translateY(-1px); }

#editor { position: relative; min-height: 0; }

.statusbar { display: flex; align-items: center; justify-content: space-between; height: 24px; padding: 0 10px; border-top: 1px solid rgba(255,255,255,0.06); background: rgba(15, 17, 21, 0.55); backdrop-filter: blur(8px); font-size: 12px; color: #9aa4b2; } 

.menubar { display: flex; gap: 12px; height: 32px; align-items: center; padding: 0 8px; border-bottom: 1px solid rgba(255,255,255,0.06); background: rgba(15, 17, 21, 0.55); backdrop-filter: blur(8px); position: relative; z-index: 5000; }
.menu { position: relative; z-index: 5001; }
.menu-label { color: #e6edf6; padding: 6px 10px; border-radius: 8px; cursor: default; transition: background .15s ease, color .15s ease; }
.menu:hover .menu-label { background: rgba(136, 189, 255, 0.14); color: #ffffff; }
.dropdown { position: absolute; top: calc(100% + 6px); left: 0; min-width: 260px; background: rgba(17, 21, 30, 0.98); border: 1px solid rgba(153, 174, 206, 0.35); border-radius: 12px; padding: 8px; box-shadow: 0 24px 80px rgba(3, 8, 20, 0.6), 0 10px 28px rgba(80, 180, 255, 0.18); opacity: 0; transform: translateY(0); pointer-events: none; transition: opacity .16s ease; z-index: 9999; backdrop-filter: blur(10px) saturate(110%); }
.menu:hover .dropdown, .menu:focus-within .dropdown, .menu.open .dropdown { opacity: 1; transform: translateY(0); pointer-events: auto; }
.menu-item { display: flex; align-items: center; justify-content: space-between; width: 100%; background: transparent; border: none; color: #f3f6fb; padding: 10px 12px; border-radius: 10px; cursor: pointer; text-align: left; font-size: 13.5px; letter-spacing: 0.1px; }
.menu-item:hover { background: rgba(136, 189, 255, 0.16); }
.menu-sep { height: 1px; margin: 8px; background: linear-gradient(90deg, transparent, rgba(200,210,230,0.35), transparent); border-radius: 1px; }
kbd { background: rgba(136, 189, 255, 0.18); border: 1px solid rgba(136, 189, 255, 0.3); padding: 2px 8px; border-radius: 8px; color: #e6edf6; font-size: 11px; } 

.titlebar { -webkit-app-region: drag; }
.window-controls, .menubar, .app, .sidebar, .main, .topbar, .statusbar, .actions, .file-tree, .tabs, .dropdown, .menu-item, button { -webkit-app-region: no-drag; } 

/* Modal â€” glass, animated, awesome */
.modal { position: fixed; inset: 0; z-index: 10000; display: block; }
.modal.hidden { display: none; }
.modal-backdrop { position: absolute; inset: 0; background: radial-gradient(1000px 600px at 20% 0%, rgba(99,102,241,0.20), transparent 60%), radial-gradient(900px 500px at 80% 100%, rgba(34,197,94,0.18), transparent 60%), rgba(6,10,16,0.65); backdrop-filter: blur(10px) saturate(115%); }

@keyframes modalPop {
	0% { transform: translateY(8px) scale(0.98); opacity: 0; }
	100% { transform: translateY(0) scale(1); opacity: 1; }
}
@keyframes pulseGlow {
	0%,100% { box-shadow: 0 0 0 rgba(99,102,241,0); }
	50% { box-shadow: 0 0 40px rgba(99,102,241,0.25); }
}

.modal-card {
	position: relative;
	width: 640px;
	max-width: calc(100vw - 48px);
	margin: 12vh auto;
	background: linear-gradient(180deg, rgba(22,26,36,0.92), rgba(16,20,30,0.92));
	border: 1px solid rgba(153,174,206,0.30);
	border-radius: 16px;
	overflow: hidden;
	animation: modalPop .18s ease-out;
}
.modal-card::before {
	content: "";
	position: absolute;
	top: -40%; left: -10%; width: 60%; height: 80%;
	background: radial-gradient(closest-side, rgba(99,102,241,0.18), transparent 60%);
	filter: blur(30px);
	pointer-events: none;
	animation: pulseGlow 3s ease-in-out infinite;
}
.modal-header { padding: 18px 20px; border-bottom: 1px solid rgba(255,255,255,0.06); display: flex; align-items: center; gap: 10px; }
.modal-header h3 { margin: 0; font-size: 18px; font-weight: 700; letter-spacing: .3px; background: linear-gradient(90deg, #cbd5e1, #93c5fd); -webkit-background-clip: text; background-clip: text; color: transparent; }
.modal-body { padding: 18px 20px; display: grid; gap: 14px; }
.modal-footer { padding: 14px 20px; border-top: 1px solid rgba(255,255,255,0.06); display: flex; justify-content: flex-end; gap: 10px; }

/* Inputs */
.field { display: grid; gap: 6px; }
.field span { font-size: 12px; color: #9aa4b2; }
.field input, .field select {
	background: rgba(26,31,45,0.7);
	color: #eef2f7;
	border: 1px solid rgba(82, 97, 126, 0.6);
	padding: 10px 12px;
	border-radius: 10px;
	outline: none;
	transition: border-color .15s ease, box-shadow .15s ease, transform .05s ease;
}
.field input:focus, .field select:focus { border-color: rgba(99,102,241,0.6); box-shadow: 0 0 0 3px rgba(99,102,241,0.20); }
.field select { appearance: none; background-image: linear-gradient(45deg, transparent 50%, #aab4c2 50%), linear-gradient(135deg, #aab4c2 50%, transparent 50%); background-position: calc(100% - 18px) calc(1em + 2px), calc(100% - 13px) calc(1em + 2px); background-size: 5px 5px, 5px 5px; background-repeat: no-repeat; }

/* Buttons */
.modal .btn, .modal .modal-footer button, .modal .modal-body button {
	background: linear-gradient(180deg, rgba(40,44,66,0.95), rgba(28,33,53,0.95));
	color: #e8edf7;
	border: 1px solid rgba(82,97,126,0.6);
	padding: 10px 14px;
	border-radius: 10px;
	cursor: pointer;
	transition: transform .08s ease, box-shadow .15s ease, background .15s ease, border-color .15s ease;
}
.modal .btn:hover, .modal .modal-footer button:hover, .modal .modal-body button:hover { transform: translateY(-1px); box-shadow: 0 8px 26px rgba(99,102,241,0.18); border-color: rgba(138,180,255,0.55); }
.modal .btn-primary { background: linear-gradient(180deg, #6366f1, #4f46e5); border-color: rgba(147,197,253,0.55); color: #fff; }
.modal .btn-primary:hover { box-shadow: 0 10px 30px rgba(99,102,241,0.35); }
.modal .btn-ghost { background: transparent; border-color: rgba(255,255,255,0.12); color: #cbd5e1; }

/* Empty state specific tweaks */
#emptyStateModal .modal-card { width: 680px; text-align: left; }
#emptyStateModal .modal-body p { color: #aab4c2; font-size: 14px; }
#emptyStateModal .modal-body button:first-child { background: linear-gradient(180deg, #22c55e, #16a34a); border-color: rgba(74,222,128,0.55); color: #0b121a; }
#emptyStateModal .modal-body button:first-child:hover { box-shadow: 0 10px 30px rgba(74,222,128,0.35); }
#emptyStateModal .modal-body button:last-child { background: linear-gradient(180deg, #60a5fa, #3b82f6); border-color: rgba(147,197,253,0.55); }

/* Light theme overrides for modal */
body.theme-light .modal-backdrop { background: radial-gradient(1000px 600px at 20% 0%, rgba(96,165,250,0.25), transparent 60%), rgba(229,231,235,0.6); backdrop-filter: blur(10px) saturate(120%); }
body.theme-light .modal-card { background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(245,247,251,0.98)); border-color: rgba(0,0,0,0.10); }
body.theme-light .modal-header { border-bottom-color: rgba(0,0,0,0.06); }
body.theme-light .modal-body .field span { color: #475569; }
body.theme-light .field input, body.theme-light .field select { background: rgba(255,255,255,0.9); color: #0f172a; border-color: rgba(0,0,0,0.12); }
body.theme-light .modal-footer { border-top-color: rgba(0,0,0,0.06); }
body.theme-light .modal .btn, body.theme-light .modal .modal-footer button, body.theme-light .modal .modal-body button { background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(238,242,255,0.98)); color: #0f172a; border-color: rgba(0,0,0,0.12); }
body.theme-light .modal .btn:hover, body.theme-light .modal .modal-footer button:hover, body.theme-light .modal .modal-body button:hover { border-color: rgba(59,130,246,0.45); box-shadow: 0 8px 26px rgba(59,130,246,0.2); }

/* Ensure modals are not draggable */
.modal, .modal-backdrop, .modal-card, .modal-header, .modal-body, .modal-footer { -webkit-app-region: no-drag; } 

.search-panel { border-top: 1px solid rgba(255,255,255,0.06); padding: 8px; display: grid; gap: 8px; }
.search-panel.hidden { display: none; }
.search-header { font-size: 12px; color: #9aa4b2; }
.search-controls { display: grid; grid-template-columns: 1fr auto auto auto; gap: 6px; align-items: center; }
.search-controls input[type="text"], .search-controls input[type="number"], .search-controls select { background: rgba(26,31,45,0.7); color: #eef2f7; border: 1px solid rgba(82,97,126,0.6); padding: 6px 8px; border-radius: 6px; }
body.theme-light .search-controls input[type="text"], body.theme-light .search-controls input[type="number"], body.theme-light .search-controls select { background: rgba(255,255,255,0.8); color: #0f172a; border-color: rgba(0,0,0,0.12); }
.search-results { max-height: 30vh; overflow: auto; display: grid; gap: 4px; }
.result-item { padding: 6px 8px; border-radius: 6px; cursor: pointer; font-size: 12px; color: #cbd5e1; }
.result-item:hover { background: rgba(255,255,255,0.05); }
.result-file { color: #8aa2c4; font-size: 11px; }
.result-line { white-space: pre; }
.result-highlight { background: rgba(255, 221, 87, 0.25); border-bottom: 1px solid rgba(255, 221, 87, 0.6); }
body.theme-light .result-item { color: #0f172a; }
body.theme-light .result-item:hover { background: rgba(2,132,199,0.10); }
body.theme-light .result-file { color: #2563eb; }

body.theme-light .result-highlight { background: rgba(250, 204, 21, 0.25); border-bottom-color: rgba(250, 204, 21, 0.6); } 

.sidebar-toolbar { display: flex; gap: 6px; align-items: center; padding: 8px; border-bottom: 1px solid rgba(255,255,255,0.06); }
.icon-btn { background: rgba(26,31,45,0.7); color: #e5e7eb; border: 1px solid rgba(82,97,126,0.6); width: 28px; height: 28px; border-radius: 8px; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; transition: transform .08s ease, box-shadow .15s ease, background .15s ease, border-color .15s ease; }
.icon-btn:hover { transform: translateY(-1px); box-shadow: 0 8px 24px rgba(99,102,241,0.18); border-color: rgba(138,180,255,0.55); }
body.theme-light .sidebar-toolbar { border-bottom-color: rgba(0,0,0,0.06); }
body.theme-light .icon-btn { background: rgba(255,255,255,0.9); color: #0f172a; border-color: rgba(0,0,0,0.12); }
body.theme-light .icon-btn:hover { box-shadow: 0 8px 24px rgba(59,130,246,0.18); border-color: rgba(59,130,246,0.45); } 

.icon-btn.accent { color: #60a5fa; border-color: rgba(147,197,253,0.55); }
.icon-btn.accent:hover { box-shadow: 0 8px 24px rgba(96,165,250,0.25); }
body.theme-light .icon-btn.accent { color: #2563eb; border-color: rgba(59,130,246,0.45); } 

.terminal { height: 30vh; border-top: 1px solid rgba(255,255,255,0.06); background: rgba(10,12,18,0.85); backdrop-filter: blur(8px); }
.terminal.hidden { display: none; }
.xterm { height: 100%; padding: 6px; }
body.theme-light .terminal { border-top-color: rgba(0,0,0,0.06); background: rgba(245,247,251,0.9); } 

.sidebar .icon-btn svg { transition: transform .08s ease, filter .15s ease, opacity .15s ease; }
.sidebar .icon-btn:hover svg { transform: translateY(-1px) scale(1.04); filter: drop-shadow(0 3px 10px rgba(96,165,250,0.35)); } 